/**
 * Quick Start Options Manager - Visual interface for managing options
 *
 * @module     local_dttutor/quick_options_manager
 * @copyright  2025 Industria Elearning
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_dttutor/quick_options_manager",["jquery","core/str"],(function($,Str){class QuickOptionsManager{constructor(fieldname,options){this.fieldname=fieldname,this.options=options||[],this.container=null,this.hiddenField=null,this.tbody=null,this.init()}init(){this.container=$('[data-fieldname="'+this.fieldname+'"]'),this.container.length&&(this.hiddenField=this.container.find('input[type="hidden"]'),this.tbody=this.container.find('[data-region="options-tbody"]'),this.renderOptions(),this.registerEvents())}registerEvents(){this.container.on("click",'[data-action="add-option"]',(()=>{this.addOption()})),this.container.on("click",'[data-action="delete-option"]',(e=>{const index=$(e.currentTarget).data("index");this.deleteOption(index)})),this.container.on("click",'[data-action="move-up"]',(e=>{const index=$(e.currentTarget).data("index");this.moveOption(index,-1)})),this.container.on("click",'[data-action="move-down"]',(e=>{const index=$(e.currentTarget).data("index");this.moveOption(index,1)})),this.container.find("[data-field]").on("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),this.addOption())}))}renderOptions(){if(this.tbody.empty(),0!==this.options.length)this.options.forEach(((option,index)=>{const row=this.createOptionRow(option,index);this.tbody.append(row)}));else{const emptyRow=$('<tr><td colspan="4" class="text-center text-muted">'+"No options configured. Add your first option below."+"</td></tr>");this.tbody.append(emptyRow)}}createOptionRow(option,index){const row=$("<tr></tr>"),iconCell=$("<td></td>").addClass("text-center").text(option.icon||""),labelCell=$("<td></td>").text(option.label||""),promptCell=$("<td></td>").text(option.prompt||""),actionsCell=$("<td></td>").addClass("text-center"),btnGroup=$("<div></div>").addClass("btn-group btn-group-sm");if(index>0){const upBtn=$("<button></button>").attr("type","button").addClass("btn btn-secondary").attr("data-action","move-up").attr("data-index",index).attr("title","Move up").html('<i class="icon fa fa-arrow-up fa-fw"></i>');btnGroup.append(upBtn)}if(index<this.options.length-1){const downBtn=$("<button></button>").attr("type","button").addClass("btn btn-secondary").attr("data-action","move-down").attr("data-index",index).attr("title","Move down").html('<i class="icon fa fa-arrow-down fa-fw"></i>');btnGroup.append(downBtn)}const deleteBtn=$("<button></button>").attr("type","button").addClass("btn btn-danger").attr("data-action","delete-option").attr("data-index",index).attr("title","Delete").html('<i class="icon fa fa-trash fa-fw"></i>');return btnGroup.append(deleteBtn),actionsCell.append(btnGroup),row.append(iconCell,labelCell,promptCell,actionsCell),row}addOption(){const iconField=this.container.find('[data-field="new-icon"]'),labelField=this.container.find('[data-field="new-label"]'),promptField=this.container.find('[data-field="new-prompt"]'),icon=iconField.val().trim(),label=labelField.val().trim(),prompt=promptField.val().trim();icon&&label&&prompt?(this.options.push({icon:icon,label:label,prompt:prompt}),iconField.val(""),labelField.val(""),promptField.val(""),this.renderOptions(),this.updateHiddenField()):Str.get_string("quickoption_validation_error","local_dttutor").done((function(message){alert(message)}))}deleteOption(index){Str.get_string("quickoption_delete_confirm","local_dttutor").done((message=>{confirm(message)&&(this.options.splice(index,1),this.renderOptions(),this.updateHiddenField())}))}moveOption(index,direction){const newIndex=index+direction;if(newIndex<0||newIndex>=this.options.length)return;const temp=this.options[index];this.options[index]=this.options[newIndex],this.options[newIndex]=temp,this.renderOptions(),this.updateHiddenField()}updateHiddenField(){const json=JSON.stringify(this.options,null,2);this.hiddenField.val(json)}}return{init:function(fieldname,options){return new QuickOptionsManager(fieldname,options)}}}));

//# sourceMappingURL=quick_options_manager.min.js.map